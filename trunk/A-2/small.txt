#include <iostream>
#include <cstdlib>
#include <ctime>
using namespace std;
static const string PROMPTS[2][2] = 
{
	{"Who would you like to choose a number?\nComputer - c\nPlayer - p\n",""},
	{"Your choice: ",""}
};
static const int RANDOM_MIN = 1;
static const int RANDOM_MAX = 100;
static int cNum, pNum, randMin, randMax, guesses;
static char pChoice, cont;
static bool done;
void player();
void computer();
void reset();
int main()
{
	reset();
	cout << "Welcome to guess a number!" << endl;
	do
	{
		cout << endl;
		cout << PROMPTS[0][0] << PROMPTS[1][0];
		cin >> pChoice;
		switch(pChoice)
		{
			case 'p':
			case 'P':
			{
				reset();
				player();
				break;
			}
			case 'c':
			case 'C':
			{
				reset();
				computer();
				break;
			}
			case 'q':
			case 'Q':
			{
				cout << "Exiting..." << endl;
				done = true;
				break;
			}
			default:
			{
				cout << "You should not see this!" << endl;
			}
		}
	}
	while(!done);
	return 0;
}
void player()
{
	cout << "Please enter your number: ";
	cin >> pNum;
	srand(time(0));
	do
	{
		do
		{
			cNum = rand() % RANDOM_MAX + RANDOM_MIN;
		}
		while((cNum < randMin) || (cNum > randMax));
		guesses ++;
		if(pNum == cNum)
		{
			cout << "The computers guess is: " << cNum << endl;
			cout << "The computer guessed it in " << guesses << " guesses!" << endl;
		}
		else
		{
			cout << "The computers guess is: " << cNum << "\nWas the computers guess too high or low? (h/l)\n" << PROMPTS[1][0];
			cin >> pChoice;
			if((pChoice == 'h') || (pChoice == 'H'))
			{
				randMax = cNum - 1;
			}
			else if((pChoice == 'l') || (pChoice == 'L'))
			{
				randMin = cNum + 1;
			}
			else if((pChoice == 'q') || (pChoice == 'Q'))
			{
				cNum = pNum;
			}
			else
			{
				cout << "That was not a choice!" << endl;
				guesses --;
			}
		}
	}
	while(cNum != pNum);
	cout << "Would you like to play again? (y/n)\n" << PROMPTS[1][0];
	cin >> cont;
	if((cont == 'n') || (cont == 'N'))
	{
		done = true;
	}
}
void computer()
{
	srand(time(0));
	cNum = rand() % RANDOM_MAX + RANDOM_MIN;
	do
	{
		cout << "Please enter your number: ";
		cin >> pNum;
		guesses ++;
		if(pNum > cNum)
		{
			cout << "Your guess was too high!" << endl;
		}
		else if(pNum < cNum)
		{
			cout << "Your guess was too low!" << endl;
		}
		else if(pNum == cNum)
		{
			cout << "You guessed it in " << guesses << " guesses!" << endl;
		}
	}
	while(pNum != cNum);
	cout << "Would you like to play again? (y/n)\n" << PROMPTS[1][0];
	cin >> cont;
	if((cont == 'n') || (cont == 'N'))
	{
		done = true;
	}
}
void reset()
{
	done = false;
	guesses = 0;
	pChoice = 1;
	cNum = 0;
	pNum = 1;
	randMin = RANDOM_MIN;
	randMax = RANDOM_MAX;
}
